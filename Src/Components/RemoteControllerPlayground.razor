@inject User _client

Place controllers here
@if (_client.IsConnected)
{
    <textarea>Connected</textarea>
}

<ButtonController ID="1" OnEventCallback="@ButtonEventAsync" Title="Btn" />



@code {
    private async Task ButtonEventAsync(ButtonControllerEvent e)
    {
        Console.WriteLine("Click");
        await _client.SendAsync(e);
    }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            await _client.ConnectAsync(new Uri("ws://localhost:5001/ws"));
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        await _client.SendAsync(new InitialMessage());

        ConfigurationMessage msg = new ConfigurationMessage();
        msg.AddBinding(1, typeof(ButtonControllerEvent));

        await _client.SendAsync(msg);

        Console.WriteLine("Done");
    }
}